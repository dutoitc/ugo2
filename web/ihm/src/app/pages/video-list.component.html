<h1>Vidéos</h1>

<div class="card search wide">
  <label>
    <span class="meta">Recherche</span>
    <input
      type="search"
      #qbox
      [value]="q()"
      (input)="onQ(qbox.value)"
      placeholder="Titre, description…"
    />
  </label>
</div>

<table class="table wide table-center">
  <thead>
    <tr>
      <th class="col-date">
        <button class="thbtn" (click)="onSort('published_at')">
          Publié <span class="sort">{{ sortIcon('published_at') }}</span>
        </button>
      </th>
      <th class="col-title left">
        <button class="thbtn left" (click)="onSort('title')">
          Titre <span class="sort">{{ sortIcon('title') }}</span>
        </button>
      </th>
      <th class="col-small">
        <button class="thbtn" (click)="onSort('yt')">YT <span class="sort">{{ sortIcon('yt') }}</span><br/><span class="header_total">({{ fmtInt(total_yt()) }})</span></button>
      </th>
      <th class="col-small">
        <button class="thbtn" (click)="onSort('fb')">FB <span class="sort">{{ sortIcon('fb') }}</span><br/><span class="header_total">({{ fmtInt(total_fb()) }})</span></button>
      </th>
      <th class="col-small">
        <button class="thbtn" (click)="onSort('ig')">IG <span class="sort">{{ sortIcon('ig') }}</span><br/><span class="header_total">({{ fmtInt(total_ig()) }})</span></button>
      </th>
      <th class="col-small">
        <button class="thbtn" (click)="onSort('total')">Total <span class="sort">{{ sortIcon('total') }}</span><br/><span class="header_total">({{ fmtInt(total_all()) }})</span></button>
      </th>
      <th class="col-small">
        <button class="thbtn" (click)="onSort('engagements')">Engagements <span class="sort">{{ sortIcon('engagements') }}</span></button>
      </th>
      <th class="col-small">
        <button class="thbtn" (click)="onSort('last_snapshot')">Dernier check <span class="sort">{{ sortIcon('last_snapshot') }}</span></button>
      </th>
    </tr>
  </thead>
  <tbody>
    <tr *ngFor="let v of items()">
      <td class="col-date">{{ toLocalDate(v.published_at) }}</td>
      <td class="col-title left">
        <a [routerLink]="['/v', v.id]">{{ v.title || '(sans titre)' }}</a>
      </td>
      <td class="col-small" [ngClass]="platClass(v, 'YOUTUBE')">{{ getPlat(v, 'YOUTUBE') | intFr }}</td>
      <td class="col-small" [ngClass]="platClass(v, 'FACEBOOK')">{{ getPlat(v, 'FACEBOOK') | intFr }}</td>
      <td class="col-small">{{ getPlat(v, 'INSTAGRAM') | intFr }}</td>
      <td class="col-small">{{ totalPlat(v) | intFr }}</td>
      <td class="col-small">{{ engagements(v) | intFr }}</td>
      <td class="col-small">{{ v.last_snapshot_at | localDateTime }}</td>
    </tr>
  </tbody>
</table>
